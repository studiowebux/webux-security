// ███╗   ███╗██╗██████╗ ██████╗ ██╗     ███████╗██╗    ██╗ █████╗ ██████╗ ███████╗
// ████╗ ████║██║██╔══██╗██╔══██╗██║     ██╔════╝██║    ██║██╔══██╗██╔══██╗██╔════╝
// ██╔████╔██║██║██║  ██║██║  ██║██║     █████╗  ██║ █╗ ██║███████║██████╔╝█████╗
// ██║╚██╔╝██║██║██║  ██║██║  ██║██║     ██╔══╝  ██║███╗██║██╔══██║██╔══██╗██╔══╝
// ██║ ╚═╝ ██║██║██████╔╝██████╔╝███████╗███████╗╚███╔███╔╝██║  ██║██║  ██║███████╗
// ╚═╝     ╚═╝╚═╝╚═════╝ ╚═════╝ ╚══════╝╚══════╝ ╚══╝╚══╝ ╚═╝  ╚═╝╚═╝  ╚═╝╚══════╝

/**
 * File: morgan.js
 * Author: Tommy Gingras
 * Date: 2019-05-25
 * License: All rights reserved Studio Webux S.E.N.C 2015-Present
 */

"use strict";

const morgan = require("morgan");
const json = require("morgan-json");

const jsonFormat = json({
  method: ":method",
  url: ":url",
  status: ":status",
  length: ":res[content-length]",
  "response-time": ":response-time ms"
});

module.exports = (log, options) => {
  if (options.type === "json") {
    return morgan(jsonFormat, {
      // combined, tiny, dev, common, short, json
      stream: log.stream
    });
  }
  return morgan(options.type, {
    // combined, tiny, dev, common, short
    stream: log.stream
  });
};
